include(FindPythonInterp)
execute_process(
	COMMAND ${PYTHON_EXECUTABLE} update_glslang_sources.py
	WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/3rdparty/glslang)

set(BUILD_SHARED_LIBS OFF CACHE BOOL "" FORCE)
set(BUILD_TESTING OFF CACHE BOOL "" FORCE)
set(ENABLE_OPT ON CACHE BOOL "" FORCE)
set(ENABLE_PCH ON CACHE BOOL "" FORCE)
set(ENABLE_CTEST OFF CACHE BOOL "" FORCE)
set(ENABLE_GLSLANG_BINARIES ON CACHE BOOL "" FORCE)
set(ENABLE_SPVREMAPPER ON CACHE BOOL "" FORCE)
set(BUILD_EXTERNAL ON CACHE BOOL "" FORCE)
set(ENABLE_HLSL ON CACHE BOOL "" FORCE)
set(USE_CCACHE ON CACHE BOOL "" FORCE)	
set(SKIP_GLSLANG_INSTALL ON CACHE BOOL "" FORCE)

add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/3rdparty/glslang)

set_target_properties(glslang PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(GenericCodeGen PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(MachineIndependent PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(OGLCompiler PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(OSDependent PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(SPIRV PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(glslang-default-resource-limits PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(HLSL PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(glslangValidator PROPERTIES FOLDER 3rdparty/Static/glslang/apps)
set_target_properties(core_tables PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(enum_string_mapping PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(extinst_tables PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(spirv-tools-pkg-config PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(spirv-tools-shared-pkg-config PROPERTIES FOLDER 3rdparty/Static/glslang)
set_target_properties(spirv-remap PROPERTIES FOLDER 3rdparty/Static/glslang/tools)
set_target_properties(spirv-tools-vimsyntax PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-utilities)
set_target_properties(SPIRV-Tools-diff PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-libraries)
set_target_properties(SPIRV-Tools-link PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-libraries)
set_target_properties(SPIRV-Tools-lint PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-libraries)
set_target_properties(SPIRV-Tools-opt PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-libraries)
set_target_properties(SPIRV-Tools-reduce PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-libraries)
set_target_properties(SPIRV-Tools-shared PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-libraries)
set_target_properties(SPIRV-Tools-static PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-libraries)
set_target_properties(spirv-as PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-executables)
set_target_properties(spirv-cfg PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-executables)
set_target_properties(spirv-diff PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-executables)
set_target_properties(spirv-dis PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-executables)
set_target_properties(spirv-link PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-executables)
set_target_properties(spirv-lint PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-executables)
set_target_properties(spirv-opt PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-executables)
set_target_properties(spirv-reduce PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-executables)
set_target_properties(spirv-val PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-executables)
set_target_properties(spirv-tools-cpp-example PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-examples)
set_target_properties(spirv-tools-build-version PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-build)
set_target_properties(spirv-tools-header-DebugInfo PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-build)
set_target_properties(spirv-tools-header-NonSemanticShaderDebugInfo100 PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-build)
set_target_properties(spirv-tools-header-OpenCLDebugInfo100 PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-build)
set_target_properties(spv-tools-cldi100 PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-build)
set_target_properties(spv-tools-clspvreflection PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-build)
set_target_properties(spv-tools-debuginfo PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-build)
set_target_properties(spv-tools-shdi100 PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-build)
set_target_properties(spv-tools-spv-amd-gs PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-build)
set_target_properties(spv-tools-spv-amd-sb PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-build)
set_target_properties(spv-tools-spv-amd-sevp PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-build)
set_target_properties(spv-tools-spv-amd-stm PROPERTIES FOLDER 3rdparty/Static/glslang/SPIRV-Tools-build)
set_target_properties(SPVRemapper PROPERTIES FOLDER 3rdparty/Static/glslang)

set(GLSLANG_INCLUDE_DIR ${CMAKE_SOURCE_DIR}/3rdparty/glslang/include)
set(GLSLANG_LIBRARIES glslang SPIRV OGLCompiler OSDependent)
#set(GLSLANG_LIBRARIES glslang SPIRV SPVRemapper OGLCompiler HLSL OSDependent)
